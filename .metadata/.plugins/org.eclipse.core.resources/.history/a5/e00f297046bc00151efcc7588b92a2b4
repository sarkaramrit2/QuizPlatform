	<div ng-app="myApp" ng-controller="manageQueriesController" ng-init="initializeController()">
	
	<form name="queryForm" class="form-horizontal" novalidate>
		<div class="form-group" >
			<label class="col-xs-1 control-label">Query:<span class="required">*</span> </label>
			<div class="col-xs-2" ng-class="{ 'has-error' : queryForm.query.$invalid && !queryForm.query.$pristine }">
				<input name="query" ng-disabled="disableFlag" class="form-control" type="text" ng-model="queryBoost.query" required />
				<span ng-show="!queryForm.query.$pristine && queryForm.query.$invalid">
					<p ng-show="queryForm.query.$error.required" class="help-block">Required!</p>
				</span>
			</div>
			<div class="col-xs-2">
				<button class="btn btn-primary" type="button" ng-disabled="disableFlag || queryForm.query.$invalid" ng-click="submitQuery();" id="submitQuery">Submit</button>
				<button class="btn btn-primary" type="button" ng-click="resetQuery();" id="resetQuery">Reset</button>
			</div>
			

			<!-- <label ng-hide="!queryBoost.pogs.length" class="col-xs-2 control-label">Queue Url:<span class="required">*</span> </label>
			<div class="col-xs-2" ng-hide="!queryBoost.pogs.length" ng-class="{ 'has-error' : queryForm.url.$invalid && !queryForm.url.$pristine }">
				<input name="url"  class="form-control" type="text" ng-model="queueUrl" required />
				<span ng-show="!queryForm.url.$pristine && queryForm.url.$invalid">
					<p ng-show="queryForm.url.$error.required" class="help-block">Required!</p>
				</span>
			</div> -->
			<div class="col-xs-2">
				<button class="btn btn-primary" type="button" ng-hide="!queryBoost.pogs.length" ng-disabled="queryForm.url.$invalid" ng-click="indexQuery();" id="indexQuery">Index</button>
			</div>
			
		</div>
		<div class="form-group" ng-hide="!queryBoost.pogs.length">
			<label class="col-xs-1 control-label">Start Date:<span class="required">*</span> </label>
			<div class="dropdown col-xs-2" style="width: 250px;">
				<a class="dropdown-toggle" id="start_date_id"
					role="button" data-toggle="dropdown" data-target="#" href="#">
					<div class="input-group">
						<input type="text" class="form-control"
							data-date-time-input="DD/MM/YYYY HH:mm:ss" readonly
							data-ng-model="queryBoost.startDate"><span
							class="input-group-addon"><i
							class="glyphicon glyphicon-calendar"></i></span>
					</div>
				</a>
				<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
					<datetimepicker data-ng-model="queryBoost.startDate"
						data-datetimepicker-config="{ dropdownSelector: '#start_date_id' }" />
				</ul>
			</div>
			<label class="col-xs-1 control-label">End Date:<span class="required">*</span> </label>
			<div class="dropdown col-xs-2" style="width: 250px;">
				<a class="dropdown-toggle" id="end_date_id"
					role="button" data-toggle="dropdown" data-target="#" href="#">
					<div class="input-group">
						<input type="text" class="form-control"
							data-date-time-input="DD/MM/YYYY HH:mm:ss" readonly
							data-ng-model="queryBoost.endDate"><span
							class="input-group-addon"><i
							class="glyphicon glyphicon-calendar"></i></span>
					</div>
				</a>
				<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
					<datetimepicker data-ng-model="queryBoost.endDate"
						data-datetimepicker-config="{ dropdownSelector: '#end_date_id' }" />
				</ul>
			</div>
			<div class="col-xs-2">
				<button class="btn btn-primary" type="button" ng-click="updateDate();" id="changeDate">Update Date</button>
			</div>
			
		</div>
	</form>
	<div ng-show="disableFlag">
	    <table ng-table="tableParams" class="table table-condensed table-bordered table-striped" show-filter="true">
	        <thead>
	        <tr>
	            <th ng-repeat="column in columns" ng-show="column.visible"
	                class="sortable" ng-class="{
	                    'sort-asc': tableParams.isSortBy(column.field, 'asc'),
	                    'sort-desc': tableParams.isSortBy(column.field, 'desc')
	                  }"
	                ng-click="tableParams.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')">
	                {{column.title}}
	            </th>
	            <!-- 
	            	Add button disabled, can be enabled if needed in future
	            <th><button class="btn btn-primary btn-sm" ng-click="openAddQueryModal();">Add</button>
				</th>
				 -->
				<th><button class="btn btn-primary btn-sm" ng-click="deleteAllByQuery();">Delete All</button>
				</th>
					            
	        </tr>
	        <tr class="ng-table-filters" ng-init="tableParams">
	            <th ng-repeat="column in columns" ng-show="column.visible" class="filter">
	                <div ng-repeat="(name, filter) in column.filter">
	                    <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL">
	                        <div ng-include="column.filterTemplateURL"></div>
	                    </div>
	                    <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL">
	                        <div ng-include="'ng-table/filters/' + filter + '.html'"></div>
	                    </div>
	                </div>
	            </th>
	        </tr>
	        </thead>
	         <tbody>
		        <tr ng-repeat="row in $data">
		            <td ng-repeat="column in columns" ng-show="column.visible" sortable="column.field" >
		                <!-- <span ng-if="editId!=$parent.$index">{{row[column.field] }} </span>
	                	<div ng-if="editId===$parent.$index">
	                		<input ng-if="!column.type" class="form-control" type="text" ng-model="row[column.field]"/>
	                		<input ng-if="column.type=='number'" class="form-control" type="number" ng-model="row[column.field]"/> -->
	                	<span ng-if="editId!=$parent.$index && column.type!='date'">{{row[column.field] }} </span>
		                <span ng-if="editId!=$parent.$index && column.type=='date'">{{row[column.field] | date:'dd/MM/yyyy HH:mm:ss'}} </span>
	                	<div ng-if="editId===$parent.$index">
	                		<span ng-if="!column.type">{{row[column.field] }} </span>
	                		<!-- <input ng-if="!column.type" class="form-control" type="text" ng-model="row[column.field]"/> -->
	                		<input ng-if="column.type=='number'" class="form-control" type="number" ng-model="row[column.field]"/>
	                		<!-- <select ng-if="column.type=='select'" class="form-control" ng-model="row[column.field]" ng-options="operation as operation for operation in operations"></select> -->

							<div class="dropdown" ng-if="column.type=='date'" style="width:250px;"  >
								<a class="dropdown-toggle" id="{{column.field+$parent.$index}}" role="button"
									data-toggle="dropdown" data-target="#" href="#">
									<div class="input-group">
										<input type="text" class="form-control" data-date-time-input="DD/MM/YYYY HH:mm:ss" readonly
											data-ng-model="row[column.field]"><span
											class="input-group-addon"><i
											class="glyphicon glyphicon-calendar"></i></span>
									</div>
								</a>
								<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
									<datetimepicker data-ng-model="row[column.field]"
										data-datetimepicker-config="{ dropdownSelector: '{{'#'+column.field+$parent.$index}}' }" />
								</ul>
							</div>


						</div>
	                		
		            </td>
		            <td>
		            	<button class="btn btn-default btn-sm" ng-disabled="editId!=-1 && editId!=$index" ng-if="editId!=$index" ng-click="editQuery($index);"><span class="glyphicon glyphicon-pencil"></span></button>
		            	<button class="btn btn-danger btn-sm" ng-disabled="editId!=-1 && editId!=$index" ng-if="editId!=$index" ng-click="deleteQuery(row);"><span class="glyphicon glyphicon-trash"></span></button>
		            	<button class="btn btn-primary btn-sm" ng-if="editId===$index" ng-click="updateQuery(row);"><span class="glyphicon glyphicon-ok"></span></button>
		            	<button class="btn btn-default btn-sm" ng-if="editId===$index" ng-click="editQuery(-1);cancelQuery();"><span class="glyphicon glyphicon-remove"></span></button>
		            </td>
		        </tr>
	        </tbody>
	    </table> 
	</div>
	<script type="text/ng-template" id="addQuery.html">
        <div class="modal-header">
            <h3 class="modal-title">Add Query</h3>
        </div>
        <div class="modal-body">
			
				<form name="queryForm" class="form-horizontal" novalidate>
					 <div class="form-group">
                        <label class="col-xs-3 control-label">Query:</label>
                        <div class="col-xs-5">
							<span>{{queryBoost.query }} </span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-xs-3 control-label">POG ID:<span class="required">*</span></label>
                        <div class="col-xs-5" ng-class="{ 'has-error' : queryForm.pogId.$invalid && !queryForm.pogId.$pristine || value_error }">
                            <input type="text" name="pogId" class="form-control" ng-model="query.pogId" required ng-minlength="2" ng-maxlength="20"/>
							<span ng-show="!queryForm.pogId.$pristine && queryForm.pogId.$invalid">
								<p ng-show="queryForm.pogId.$error.required" class="help-block">Required!</p>
								<p ng-show="queryForm.pogId.$error.maxlength" class="help-block">Too Large!</p>
								<p ng-show="queryForm.pogId.$error.minlength" class="help-block">Too Short!</p>
							</span>
							<span ng-show="value_error"><p  class="help-block">{{error}}</p></span>
                        </div>
                    </div>

			
                    <div class="form-group" >
                        <label class="col-xs-3 control-label">Score:<span class="required">*</span></label>
                        <div class="col-xs-5" ng-class="{ 'has-error' : queryForm.score.$invalid && !queryForm.score.$pristine || score_error }">
                            <input type="number" class="form-control" name="score" ng-model="query.score" required ng-maxlength="5"/>
							<span ng-show="!queryForm.score.$pristine && queryForm.score.$invalid">	
								<p ng-show="queryForm.score.$error.required" class="help-block">Required!</p>
								<p ng-show="queryForm.score.$error.maxlength" class="help-block">Too Large!</p>
								<p ng-show="queryForm.score.$error.number" class="help-block">Not valid number!</p>
							</span>
							<span ng-show="score_error"><p  class="help-block">{{error}}</p></span>
                        </div>
                    </div>

					<input type="hidden" class="form-control" name="_id" ng-model="query._id"/>
					
                </form>
            </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="addPog()" ng-disabled="queryForm.pogId.$invalid || queryForm.score.$invalid">Save</button>
            <button class="btn btn-warning" ng-click="closeAddQueryModal()">Cancel</button>
        </div>
	</script>
	</div>
	
	
