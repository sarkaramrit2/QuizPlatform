<%@ include file="/tld_includes.jsp"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<tiles:insertTemplate template="/views/layout/adminBaseTheme.jsp">
	<tiles:putAttribute name="title" value="Query Admin" />
	<tiles:putAttribute name="head">
		<link href="${path.css('typeahead/typeahead.css')}" rel="stylesheet" type="text/css" />
		<link href="${path.css('/landingpage.css')}" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="${path.js('hogan/hogan-2.0.0.js')}"></script>
		<script type="text/javascript" src="${path.js('typeahead/typeahead.min.js')}"></script>
		<script type="text/javascript">
			var subCats = '${subCategories}';
			var qs = '${queries}';
			var subCategories = jsonToObj(subCats);
			var queries = jsonToObj(qs);
			var pageSize = parseInt('${pageSize}');
			var rowSize = parseInt('${rowSize}');
			var typeaheadLimit = parseInt('${typeaheadLimit}');
		</script>
		<script type = "text/template" id="activatedFilters">
		{{#error}}
			<p> Sorry , the URL should be of type http://www.snapdeal.com/product..  Also, the categories/filters used should be valid. Please correct & try again</p>
		{{/error}}
		{{^error}}
			<h3 class="filter-table-heading"> Filter Table generated from URL </h3>
			<label class="filter-category"> Category :  {{categoryUrl}} </h3>
			<table class="filter-table">
				{{#filters}}
					<tr>
  						<td>
    						{{filterName}} 
  						</td>
  						{{^rangeEnd}}
  						{{#displayValues}}
					        <td>
					          {{value}}
					        </td>
					    {{/displayValues}}
  						{{/rangeEnd}}
  						{{#rangeEnd}}
  						<td>
    						{{rangeStartSelected}},{{rangeEndSelected}}
  						</td>
  						{{/rangeEnd}}
</tr>
{{/filters}}
			</table>
		{{/error}}
		</script>
	</tiles:putAttribute>
	<tiles:putAttribute name="deferredScript">
		<!-- <script type="text/javascript" src="${path.js('landingPage/query-validations.js')}"></script>  -->
		<script type="text/javascript" src="${path.js('landingPage/query-admin-functions.js')}"></script>
		<script type="text/javascript" src="${path.js('landingPage/landingPage-admin-functions.js')}"></script>
	</tiles:putAttribute>

	<tiles:putAttribute name="body">
		<div style="margin-left: 10px; margin-right: 10px">
			<jsp:include page="bootstrap/brand.jsp">
				<jsp:param value="Query Admin" name="title" />
			</jsp:include>
			<jsp:include page="landingPage/landingPageToolbar.jsp" />
			
			<div id="message"></div>

			<div class="tabbable tabs-below">
				<!-- Only required for left/right tabs -->
				<ul class="nav nav-tabs">
				<li class="active"><a id="searchQuery" href="#tab1"
						data-toggle="tab">Search Query</a></li>
					<li class=""><a id="addEditQuery" href="#tab2"
						data-toggle="tab">Add/Edit Query</a></li>
				</ul>
				<div class="tab-content"
					style="height: 400px; padding: 10 px; margin-top: 10px">
					<div class="tab-pane active fade in" id="tab1">
						<div class="row">
							<div class="col-md-5">
								<form class="form-horizontal" role="form">
									<jsp:include page="bootstrap/textInput.jsp">
										<jsp:param value="query-search" name="id" />
										<jsp:param value="Select Query" name="text" />
										<jsp:param value="col-lg-8" name="size" />
										<jsp:param value="col-lg-4" name="labelSize" />
										<jsp:param value="typeahead" name="inputClass" />
									</jsp:include>	
								</form>
							</div>
						</div>						
					</div>
					<div class="tab-pane fade" id="tab2">
						<jsp:include page="landingPage/addEditQuery.jsp" />
					</div>
				</div>
			</div>
		</div>
	</tiles:putAttribute>
</tiles:insertTemplate>